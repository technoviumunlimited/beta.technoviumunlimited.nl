{"version":3,"file":"js/864.e0c791e0.js","mappings":"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","sources":["webpack://technovium.unlimited/./node_modules/unity-webgl/dist/index.esm.js","webpack://technovium.unlimited/./node_modules/unity-webgl/node_modules/vue-demi/lib/index.mjs","webpack://technovium.unlimited/./node_modules/unity-webgl/vue/index.esm.js","webpack://technovium.unlimited/./src/views/GameView.vue","webpack://technovium.unlimited/./src/views/GameView.vue?3e8c"],"sourcesContent":["/*!\n * unity-webgl.js v3.4.2\n * (c) 2023 Mervin<mengqing723@gmail.com>\n * Released under the MIT License.\n */\nconst isPlainObject = arg => Object.prototype.toString.call(arg) === '[object Object]';\r\nconst msgPrefix = '[UnityWebgl]: ';\r\nfunction log(msg) {\r\n    console.log(msgPrefix, msg);\r\n}\r\nlog.warn = (msg) => console.warn(msgPrefix, msg);\r\nlog.error = (msg) => console.error(msgPrefix, msg);\r\n/**\r\n * query CanvasElement\r\n * @param {string | HTMLCanvasElement} canvas\r\n * @returns\r\n */\r\nfunction queryCanvas(canvas) {\r\n    if (canvas instanceof HTMLCanvasElement) {\r\n        return canvas;\r\n    }\r\n    else if (typeof canvas === 'string') {\r\n        return document.querySelector(canvas);\r\n    }\r\n    else {\r\n        log.warn('CanvasElement not found.');\r\n        return null;\r\n    }\r\n}\n\nclass EventBus {\r\n    constructor(_eventMap = {}) {\r\n        this._eventMap = _eventMap;\r\n    }\r\n    on(name, handler) {\r\n        if (typeof handler !== 'function') {\r\n            throw new TypeError(msgPrefix + 'The argument handler must be function');\r\n        }\r\n        this._eventMap[name] = handler;\r\n        return this;\r\n    }\r\n    off(name) {\r\n        delete this._eventMap[name];\r\n        return this;\r\n    }\r\n    once(name, handler) {\r\n        const ctx = this;\r\n        function fn(...args) {\r\n            if (typeof handler === 'function') {\r\n                ctx.off(name);\r\n                handler.apply(ctx, args);\r\n            }\r\n        }\r\n        return this.on(name, fn);\r\n    }\r\n    emit(name, ...args) {\r\n        const handler = this._eventMap[name];\r\n        if (handler) {\r\n            handler.apply(this, args);\r\n        }\r\n    }\r\n    clear() {\r\n        for (const name in this._eventMap) {\r\n            delete this._eventMap[name];\r\n        }\r\n    }\r\n}\n\n/**\r\n * The unity loader\r\n * @param {string} src loaderUrl\r\n * @param {object} callbackObj callbackObj\r\n * @param {Function} callbackObj.resolve resolve\r\n * @param {Function} callbackObj.reject reject\r\n * @returns\r\n */\r\nfunction unityLoader(src, { resolve, reject }) {\r\n    if (!src) {\r\n        reject && reject(new Error(`${msgPrefix} loaderUrl not found.`));\r\n        return;\r\n    }\r\n    if (typeof window.createUnityInstance === 'function') {\r\n        // console.warn('UnityWebgl: Unity Loader already exists')\r\n        resolve && resolve();\r\n        return;\r\n    }\r\n    function handler(code) {\r\n        if (code === 'ready') {\r\n            resolve && resolve();\r\n        }\r\n        else {\r\n            reject && reject(new Error(`${msgPrefix} ${src} loading failure.`));\r\n        }\r\n    }\r\n    let script = document.querySelector(`script[src=\"${src}\"]`);\r\n    if (script === null) {\r\n        script = document.createElement('script');\r\n        script.src = src;\r\n        script.async = true;\r\n        script.setAttribute('data-status', 'loading');\r\n        document.body.appendChild(script);\r\n        const setAttributeFromEvent = function (event) {\r\n            const _status = event.type === 'load' ? 'ready' : 'error';\r\n            script === null || script === void 0 ? void 0 : script.setAttribute('data-status', _status);\r\n            // handler(_status)\r\n        };\r\n        script.addEventListener('load', setAttributeFromEvent);\r\n        script.addEventListener('error', setAttributeFromEvent);\r\n    }\r\n    else {\r\n        handler(script.getAttribute('data-status'));\r\n    }\r\n    const setStateFromEvent = function (event) {\r\n        handler(event.type === 'load' ? 'ready' : 'error');\r\n    };\r\n    script.addEventListener('load', setStateFromEvent);\r\n    script.addEventListener('error', setStateFromEvent);\r\n    return function () {\r\n        if (script) {\r\n            script.removeEventListener('load', setStateFromEvent);\r\n            script.removeEventListener('error', setStateFromEvent);\r\n            document.body.removeChild(script);\r\n        }\r\n    };\r\n}\n\nlet BRIDGE_NAME = '__UnityLib__';\r\nconst defaultConfig = {\r\n    streamingAssetsUrl: 'StreamingAssets',\r\n    companyName: 'Unity',\r\n    productName: 'Unity'\r\n};\r\n/**\r\n * generate UnityInstance arguments\r\n * @param {object} unityContext unityContext\r\n * @returns\r\n */\r\nfunction generateUnityArguments(unity) {\r\n    const unityInstanceArgs = Object.assign({}, unity.unityConfig);\r\n    unityInstanceArgs.print = function (message) {\r\n        unity.emit('debug', message);\r\n    };\r\n    unityInstanceArgs.printError = function (message) {\r\n        unity.emit('error', message);\r\n    };\r\n    // delete unityInstanceArgs['lodaderUrl']\r\n    return unityInstanceArgs;\r\n}\r\n/**\r\n * UnityWebgl\r\n * // new UnityWebgl(canvasElement, unityConfig, bridge)\r\n */\r\nclass UnityWebgl extends EventBus {\r\n    constructor(canvas, config, bridge) {\r\n        if (window === undefined) {\r\n            throw new Error(msgPrefix + `Must be running in browser.`);\r\n        }\r\n        bridge = bridge !== null && bridge !== void 0 ? bridge : BRIDGE_NAME;\r\n        if (isPlainObject(canvas) && typeof config === 'string') {\r\n            bridge = config || bridge;\r\n        }\r\n        if (bridge in window) {\r\n            log.error(msgPrefix + `window.${bridge} already exists.`);\r\n        }\r\n        BRIDGE_NAME = bridge;\r\n        super((window[bridge] = {}));\r\n        this.canvasElement = null;\r\n        this.unityLoader = null;\r\n        this.unityInstance = null;\r\n        if (isPlainObject(canvas)) {\r\n            this.unityConfig = Object.assign({}, defaultConfig, canvas);\r\n        }\r\n        else {\r\n            this.unityConfig = Object.assign({}, defaultConfig, config);\r\n            const $canvas = queryCanvas(canvas);\r\n            if ($canvas) {\r\n                this.create($canvas);\r\n            }\r\n        }\r\n    }\r\n    get bridge() {\r\n        return BRIDGE_NAME;\r\n    }\r\n    set bridge(name) {\r\n        window[name] = window[BRIDGE_NAME];\r\n        delete window[BRIDGE_NAME];\r\n        BRIDGE_NAME = name;\r\n    }\r\n    create(canvas) {\r\n        if (this.unityInstance && this.canvasElement && this.unityLoader) {\r\n            log.warn('Unity Instance already exists!');\r\n            return void 0;\r\n        }\r\n        const canvasElement = queryCanvas(canvas);\r\n        if (!canvasElement) {\r\n            log.warn('CanvasElement not found.');\r\n            return void 0;\r\n        }\r\n        this.emit('beforeMount', this);\r\n        this.canvasElement = canvasElement;\r\n        const ctx = this;\r\n        const unityArguments = generateUnityArguments(this);\r\n        const loader = unityLoader(this.unityConfig.loaderUrl, {\r\n            resolve() {\r\n                try {\r\n                    // Creates the Unity Instance, this method is made available globally by the Unity Loader.\r\n                    window\r\n                        .createUnityInstance(canvasElement, unityArguments, (val) => ctx.emit('progress', val))\r\n                        .then((unity) => {\r\n                        ctx.unityInstance = unity;\r\n                        ctx.emit('created', unity); // todo 待删除\r\n                        ctx.emit('mounted', ctx);\r\n                    })\r\n                        .catch((err) => {\r\n                        ctx.unityInstance = null;\r\n                        ctx.emit('error', err);\r\n                    });\r\n                }\r\n                catch (err) {\r\n                    ctx.unityInstance = null;\r\n                    ctx.emit('error', err);\r\n                }\r\n            },\r\n            reject(e) {\r\n                log.error(e.message);\r\n            }\r\n        });\r\n        if (typeof loader === 'function') {\r\n            this.unityLoader = loader;\r\n        }\r\n    }\r\n    /**\r\n     * Sends a message to the UnityInstance to invoke a public method.\r\n     * @param {string} objectName Unity scene name.\r\n     * @param {string} methodName public method name.\r\n     * @param {any} params an optional method parameter.\r\n     * @returns\r\n     */\r\n    send(objectName, methodName, params) {\r\n        if (this.unityInstance) {\r\n            if (params === undefined || params === null) {\r\n                this.unityInstance.SendMessage(objectName, methodName);\r\n            }\r\n            else {\r\n                const _params = typeof params === 'object' ? JSON.stringify(params) : params;\r\n                this.unityInstance.SendMessage(objectName, methodName, _params);\r\n            }\r\n        }\r\n        else {\r\n            log.warn('Unable to Send Message while Unity is not Instantiated.');\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Asynchronously ask for the pointer to be locked on current canvas. To track\r\n     * the success or failure of the request, it is necessary to listen for the\r\n     * pointerlockchange and pointerlockerror events at the Document level.\r\n     * @public\r\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/requestPointerLock\r\n     */\r\n    requestPointerLock() {\r\n        var _a, _b;\r\n        const canvasElement = this.canvasElement || ((_b = (_a = this.unityInstance) === null || _a === void 0 ? void 0 : _a.Module) === null || _b === void 0 ? void 0 : _b.canvas);\r\n        if (canvasElement) {\r\n            canvasElement.requestPointerLock();\r\n        }\r\n    }\r\n    /**\r\n     * Takes a screenshot of the canvas and returns a data URL containing image\r\n     * data. The image data is in .png format unless otherwise specified.\r\n     * @param {string} dataType The image format of the screenshot, [\"image/png\" | \"image/jpeg\" | \"image/webp\"]\r\n     * @param {number} quality The quality of the jpg or webp screenshot\r\n     * @returns a data URL containing image data of a snapshot of the canvas\r\n     */\r\n    takeScreenshot(dataType = 'image/jpeg', quality) {\r\n        var _a, _b, _c;\r\n        const canvasElement = this.canvasElement || ((_b = (_a = this.unityInstance) === null || _a === void 0 ? void 0 : _a.Module) === null || _b === void 0 ? void 0 : _b.canvas);\r\n        if (!canvasElement) {\r\n            log.warn('Unable to Take Screenshot while Unity is not Instantiated or Canvas is not available.');\r\n            return;\r\n        }\r\n        if (((_c = this.unityConfig.webglContextAttributes) === null || _c === void 0 ? void 0 : _c.preserveDrawingBuffer) !== true) {\r\n            log.warn('Taking a screenshot requires \"preserveDrawingBuffer\".');\r\n        }\r\n        // Takes a screenshot by converting Canvas's render-context's buffer into\r\n        // a Data URL of the specified data type and quality.\r\n        return canvasElement.toDataURL(dataType, quality);\r\n    }\r\n    /**\r\n     * Enables or disabled the Fullscreen mode of the Unity Instance.\r\n     * @param {boolean} enabled\r\n     */\r\n    setFullscreen(enabled) {\r\n        if (!this.unityInstance) {\r\n            // Guarding the Unity Instance.\r\n            log.warn('Unable to Set Fullscreen while Unity is not Instantiated.');\r\n            return;\r\n        }\r\n        this.unityInstance.SetFullscreen(enabled ? 1 : 0);\r\n    }\r\n    /**\r\n     * Quits the Unity instance and clears it from memory so that Unmount from the DOM.\r\n     */\r\n    unload() {\r\n        if (this.unityInstance === null) {\r\n            // Guarding the Unity Instance.\r\n            log.warn('Unable to Quit Unity while Unity is not Instantiated.');\r\n            return Promise.reject();\r\n        }\r\n        this.emit('beforeUnmount', this);\r\n        // Unmount unity.loader.js from the DOM\r\n        if (this.unityLoader) {\r\n            this.unityLoader();\r\n            this.unityLoader = null;\r\n        }\r\n        return this.unityInstance.Quit().then(() => {\r\n            this.emit('unmounted');\r\n            this.emit('destroyed'); // todo 待删除\r\n            this.unityInstance = null;\r\n            // Clear all events\r\n            // this.clear()\r\n            delete window[BRIDGE_NAME];\r\n        });\r\n    }\r\n    /**\r\n     * Detatches the Unity Instance from the React DOM, by doing so, the Unity\r\n     * Instance can be unloaded from the memory while the Unity component can be\r\n     * unmounted safely.\r\n     *\r\n     * Warning! This is a workaround for the fact that the Unity WebGL instances\r\n     * which are build with Unity 2021.2 and newer cannot be unmounted before the\r\n     * Unity Instance is unloaded.\r\n     */\r\n    _unsafe_unload() {\r\n        try {\r\n            if (this.unityInstance === null || !this.unityInstance.Module.canvas) {\r\n                // Guarding the Unity Instance.\r\n                log.warn('No Unity Instance found.');\r\n                return Promise.reject();\r\n            }\r\n            // Re-attaches the canvas to the body element of the document. This way it\r\n            // wont be removed from the DOM when the component is unmounted. Then the\r\n            // canvas will be hidden while it is being unloaded.\r\n            const canvas = this.unityInstance.Module.canvas;\r\n            document.body.appendChild(canvas);\r\n            canvas.style.display = 'none';\r\n            // Unloads the Unity Instance.\r\n            return this.unload().then(() => {\r\n                // Eventually the canvas will be removed from the DOM. This has to be done\r\n                // manually since the canvas is no longer controlled by the React DOM.\r\n                canvas.remove();\r\n            });\r\n        }\r\n        catch (e) {\r\n            log.error(e.message);\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n}\n\nexport { UnityWebgl as default };\n","import * as Vue from 'vue'\n\nvar isVue2 = false\nvar isVue3 = true\nvar Vue2 = undefined\n\nfunction install() {}\n\nexport function set(target, key, val) {\n  if (Array.isArray(target)) {\n    target.length = Math.max(target.length, key)\n    target.splice(key, 1, val)\n    return val\n  }\n  target[key] = val\n  return val\n}\n\nexport function del(target, key) {\n  if (Array.isArray(target)) {\n    target.splice(key, 1)\n    return\n  }\n  delete target[key]\n}\n\nexport * from 'vue'\nexport {\n  Vue,\n  Vue2,\n  isVue2,\n  isVue3,\n  install,\n}\n","import { defineComponent, ref, computed, onMounted, onBeforeUnmount, h, isVue2 } from 'vue-demi';\n\nlet unityInstanceIdentifier = 0;\r\nfunction cssUnit(val) {\r\n    const regx = /^\\d+(px|em|%|vw|vh|rem)?$/;\r\n    if (typeof val === 'number') {\r\n        return val + 'px';\r\n    }\r\n    else {\r\n        return regx.test(val)\r\n            ? isNaN(val)\r\n                ? val\r\n                : val + 'px'\r\n            : '100%';\r\n    }\r\n}\r\nvar index = defineComponent({\r\n    name: 'UnityWebglComponent',\r\n    props: {\r\n        unity: {\r\n            type: Object\r\n        },\r\n        width: {\r\n            type: [String, Number],\r\n            default: '100%'\r\n        },\r\n        height: {\r\n            type: [String, Number],\r\n            default: '100%'\r\n        }\r\n    },\r\n    setup(props) {\r\n        const canvas = ref(null);\r\n        unityInstanceIdentifier++;\r\n        const canvasStyle = computed(() => {\r\n            return {\r\n                width: cssUnit(props.width),\r\n                height: cssUnit(props.height)\r\n            };\r\n        });\r\n        onMounted(() => {\r\n            var _a;\r\n            if (canvas.value) {\r\n                (_a = props.unity) === null || _a === void 0 ? void 0 : _a.create(canvas.value);\r\n            }\r\n        });\r\n        onBeforeUnmount(() => {\r\n            var _a;\r\n            (_a = props.unity) === null || _a === void 0 ? void 0 : _a._unsafe_unload();\r\n        });\r\n        return () => h('canvas', isVue2\r\n            ? {\r\n                ref: canvas,\r\n                attrs: {\r\n                    id: `unity-canvas-${unityInstanceIdentifier}`\r\n                },\r\n                style: canvasStyle.value\r\n            }\r\n            : {\r\n                ref: canvas,\r\n                id: `unity-canvas-${unityInstanceIdentifier}`,\r\n                style: canvasStyle.value\r\n            });\r\n    }\r\n});\n\nexport { index as default };\n","<template>\r\n    <div class=\"slide-wrapper\">\r\n      <div class=\"container-fluid\">\r\n        <div class=\"row justify-content-center\">\r\n          <div class=\"progress\" style=\"width: 50%; margin-top: 60px;\">\r\n            <div class=\"progress-bar\" role=\"progressbar\" style=\"width: 0%;\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\">0%</div>\r\n          </div>\r\n          <div id=\"game\" style=\"width: 900px; height: 600px; border: 1px solid #fff\">\r\n            <UnityVue :unity=\"unityContext\" v-if=\"unityContext\" />\r\n            <a @click=\"onFullscreen\" class=\"btn float-right\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-fullscreen\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z\"/>\r\n              </svg>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { useRoute } from \"vue-router\";\r\n  import { onBeforeMount, reactive, ref } from 'vue';\r\n  import UnityWebgl from 'unity-webgl';\r\n  import UnityVue from 'unity-webgl/vue';\r\n  import $ from 'jquery';\r\n  \r\n  const state = reactive({\r\n    results: {},\r\n    errors: [],\r\n    loading: false,\r\n  });\r\n  \r\n  const unityContext = ref(null);\r\n  const route = useRoute();\r\n  \r\n  onBeforeMount(async () => {\r\n    try {\r\n      const response = await fetch('https://api.technoviumunlimited.nl/v1/games/' + route.params.id);\r\n      const data = await response.json();\r\n      state.results = data.game;\r\n  \r\n      unityContext.value = new UnityWebgl({\r\n        loaderUrl: data.game[0]._loader_js[0],\r\n        dataUrl: data.game[0]._data_gz[0],\r\n        frameworkUrl: data.game[0]._framework_js_gz[0],\r\n        codeUrl: data.game[0]._wasm_gz[0],\r\n      });\r\n  \r\n      unityContext.value.on('progress', (number) => {\r\n        $(\".progress-bar\").css(\"width\", (number * 100) + \"%\").text((number * 100) + \"%\");\r\n        //dummyString = dummyString.split(':')[0]\r\n  \r\n        if (number === 1) {\r\n          $('.progress').hide();\r\n          $('#game').show();\r\n        } else {\r\n          $('#game').hide();\r\n        }\r\n  \r\n        //console.log(\"progress:\" + number);\r\n      });\r\n\r\n      unityContext.value.on('created', () => {\r\n        console.log('Unity Instance: created.');\r\n        userInfo();\r\n      })\r\n\r\n      /*\r\n      unityContext.value.on('userInfo', (data) => {\r\n        console.log(data)\r\n        //$('#dialog').show()\r\n      })\r\n      // you also can call function.\r\n      unityContext.value.emit('userInfo', data);\r\n      */  \r\n    } catch (error) {\r\n      state.errors.push(error);\r\n    }\r\n  });\r\n  const userInfo = () => {\r\n    console.log('inside userinfo');\r\n    unityContext.value.send('mainController', 'UserInfo', {\r\n        JWT: 'b001',\r\n        Email: 'buil001'\r\n    });\r\n    console.log('after userinfo');\r\n  }\r\n  const onFullscreen = () => {\r\n    unityContext.value.setFullscreen(true)\r\n  };\r\n\r\n\r\n  \r\n  </script>\r\n  ","import script from \"./GameView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./GameView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["isPlainObject","arg","Object","prototype","toString","call","msgPrefix","log","msg","console","queryCanvas","canvas","HTMLCanvasElement","document","querySelector","warn","error","EventBus","constructor","_eventMap","this","on","name","handler","TypeError","off","once","ctx","fn","args","apply","emit","clear","unityLoader","src","resolve","reject","Error","window","createUnityInstance","code","script","createElement","async","setAttribute","body","appendChild","setAttributeFromEvent","event","_status","type","addEventListener","getAttribute","setStateFromEvent","removeEventListener","removeChild","BRIDGE_NAME","defaultConfig","streamingAssetsUrl","companyName","productName","generateUnityArguments","unity","unityInstanceArgs","assign","unityConfig","print","message","printError","UnityWebgl","config","bridge","undefined","super","canvasElement","unityInstance","$canvas","create","unityArguments","loader","loaderUrl","val","then","catch","err","e","send","objectName","methodName","params","SendMessage","_params","JSON","stringify","requestPointerLock","_a","_b","Module","takeScreenshot","dataType","quality","_c","webglContextAttributes","preserveDrawingBuffer","toDataURL","setFullscreen","enabled","SetFullscreen","unload","Promise","Quit","_unsafe_unload","style","display","remove","isVue2","unityInstanceIdentifier","cssUnit","regx","test","isNaN","index","defineComponent","props","width","String","Number","default","height","setup","ref","canvasStyle","computed","onMounted","value","onBeforeUnmount","h","attrs","id","state","reactive","results","errors","loading","unityContext","route","useRoute","onBeforeMount","response","fetch","data","json","game","_loader_js","dataUrl","_data_gz","frameworkUrl","_framework_js_gz","codeUrl","_wasm_gz","number","$","css","text","hide","show","userInfo","push","JWT","Email","onFullscreen","__exports__"],"sourceRoot":""}