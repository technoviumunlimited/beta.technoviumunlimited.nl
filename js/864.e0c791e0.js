"use strict";(self["webpackChunktechnovium_unlimited"]=self["webpackChunktechnovium_unlimited"]||[]).push([[864],{7864:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});n(7658);var i=n(3396),r=n(4870),s=n(2483);
/*!
 * unity-webgl.js v3.4.2
 * (c) 2023 Mervin<mengqing723@gmail.com>
 * Released under the MIT License.
 */
const a=e=>"[object Object]"===Object.prototype.toString.call(e),o="[UnityWebgl]: ";function l(e){console.log(o,e)}function u(e){return e instanceof HTMLCanvasElement?e:"string"===typeof e?document.querySelector(e):(l.warn("CanvasElement not found."),null)}l.warn=e=>console.warn(o,e),l.error=e=>console.error(o,e);class c{constructor(e={}){this._eventMap=e}on(e,t){if("function"!==typeof t)throw new TypeError(o+"The argument handler must be function");return this._eventMap[e]=t,this}off(e){return delete this._eventMap[e],this}once(e,t){const n=this;function i(...i){"function"===typeof t&&(n.off(e),t.apply(n,i))}return this.on(e,i)}emit(e,...t){const n=this._eventMap[e];n&&n.apply(this,t)}clear(){for(const e in this._eventMap)delete this._eventMap[e]}}function d(e,{resolve:t,reject:n}){if(!e)return void(n&&n(new Error(`${o} loaderUrl not found.`)));if("function"===typeof window.createUnityInstance)return void(t&&t());function i(i){"ready"===i?t&&t():n&&n(new Error(`${o} ${e} loading failure.`))}let r=document.querySelector(`script[src="${e}"]`);if(null===r){r=document.createElement("script"),r.src=e,r.async=!0,r.setAttribute("data-status","loading"),document.body.appendChild(r);const t=function(e){const t="load"===e.type?"ready":"error";null===r||void 0===r||r.setAttribute("data-status",t)};r.addEventListener("load",t),r.addEventListener("error",t)}else i(r.getAttribute("data-status"));const s=function(e){i("load"===e.type?"ready":"error")};return r.addEventListener("load",s),r.addEventListener("error",s),function(){r&&(r.removeEventListener("load",s),r.removeEventListener("error",s),document.body.removeChild(r))}}let h="__UnityLib__";const v={streamingAssetsUrl:"StreamingAssets",companyName:"Unity",productName:"Unity"};function y(e){const t=Object.assign({},e.unityConfig);return t.print=function(t){e.emit("debug",t)},t.printError=function(t){e.emit("error",t)},t}class f extends c{constructor(e,t,n){if(void 0===window)throw new Error(o+"Must be running in browser.");if(n=null!==n&&void 0!==n?n:h,a(e)&&"string"===typeof t&&(n=t||n),n in window&&l.error(o+`window.${n} already exists.`),h=n,super(window[n]={}),this.canvasElement=null,this.unityLoader=null,this.unityInstance=null,a(e))this.unityConfig=Object.assign({},v,e);else{this.unityConfig=Object.assign({},v,t);const n=u(e);n&&this.create(n)}}get bridge(){return h}set bridge(e){window[e]=window[h],delete window[h],h=e}create(e){if(this.unityInstance&&this.canvasElement&&this.unityLoader)return void l.warn("Unity Instance already exists!");const t=u(e);if(!t)return void l.warn("CanvasElement not found.");this.emit("beforeMount",this),this.canvasElement=t;const n=this,i=y(this),r=d(this.unityConfig.loaderUrl,{resolve(){try{window.createUnityInstance(t,i,(e=>n.emit("progress",e))).then((e=>{n.unityInstance=e,n.emit("created",e),n.emit("mounted",n)})).catch((e=>{n.unityInstance=null,n.emit("error",e)}))}catch(e){n.unityInstance=null,n.emit("error",e)}},reject(e){l.error(e.message)}});"function"===typeof r&&(this.unityLoader=r)}send(e,t,n){if(this.unityInstance)if(void 0===n||null===n)this.unityInstance.SendMessage(e,t);else{const i="object"===typeof n?JSON.stringify(n):n;this.unityInstance.SendMessage(e,t,i)}else l.warn("Unable to Send Message while Unity is not Instantiated.");return this}requestPointerLock(){var e,t;const n=this.canvasElement||(null===(t=null===(e=this.unityInstance)||void 0===e?void 0:e.Module)||void 0===t?void 0:t.canvas);n&&n.requestPointerLock()}takeScreenshot(e="image/jpeg",t){var n,i,r;const s=this.canvasElement||(null===(i=null===(n=this.unityInstance)||void 0===n?void 0:n.Module)||void 0===i?void 0:i.canvas);if(s)return!0!==(null===(r=this.unityConfig.webglContextAttributes)||void 0===r?void 0:r.preserveDrawingBuffer)&&l.warn('Taking a screenshot requires "preserveDrawingBuffer".'),s.toDataURL(e,t);l.warn("Unable to Take Screenshot while Unity is not Instantiated or Canvas is not available.")}setFullscreen(e){this.unityInstance?this.unityInstance.SetFullscreen(e?1:0):l.warn("Unable to Set Fullscreen while Unity is not Instantiated.")}unload(){return null===this.unityInstance?(l.warn("Unable to Quit Unity while Unity is not Instantiated."),Promise.reject()):(this.emit("beforeUnmount",this),this.unityLoader&&(this.unityLoader(),this.unityLoader=null),this.unityInstance.Quit().then((()=>{this.emit("unmounted"),this.emit("destroyed"),this.unityInstance=null,delete window[h]})))}_unsafe_unload(){try{if(null===this.unityInstance||!this.unityInstance.Module.canvas)return l.warn("No Unity Instance found."),Promise.reject();const e=this.unityInstance.Module.canvas;return document.body.appendChild(e),e.style.display="none",this.unload().then((()=>{e.remove()}))}catch(e){return l.error(e.message),Promise.reject(e)}}}var m=!1;let w=0;function g(e){const t=/^\d+(px|em|%|vw|vh|rem)?$/;return"number"===typeof e?e+"px":t.test(e)?isNaN(e)?e:e+"px":"100%"}var p=(0,i.aZ)({name:"UnityWebglComponent",props:{unity:{type:Object},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"100%"}},setup(e){const t=(0,r.iH)(null);w++;const n=(0,i.Fl)((()=>({width:g(e.width),height:g(e.height)})));return(0,i.bv)((()=>{var n;t.value&&(null===(n=e.unity)||void 0===n||n.create(t.value))})),(0,i.Jd)((()=>{var t;null===(t=e.unity)||void 0===t||t._unsafe_unload()})),()=>(0,i.h)("canvas",m?{ref:t,attrs:{id:`unity-canvas-${w}`},style:n.value}:{ref:t,id:`unity-canvas-${w}`,style:n.value})}}),b=n(7387),_=n.n(b);const U={class:"slide-wrapper"},I={class:"container-fluid"},j={class:"row justify-content-center"},E=(0,i._)("div",{class:"progress",style:{width:"50%","margin-top":"60px"}},[(0,i._)("div",{class:"progress-bar",role:"progressbar",style:{width:"0%"},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"},"0%")],-1),C={id:"game",style:{width:"900px",height:"600px",border:"1px solid #fff"}},M=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-fullscreen",viewBox:"0 0 16 16"},[(0,i._)("path",{d:"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"})],-1),L=[M];var x={__name:"GameView",setup(e){const t=(0,r.qj)({results:{},errors:[],loading:!1}),n=(0,r.iH)(null),a=(0,s.yj)();(0,i.wF)((async()=>{try{const e=await fetch("https://api.technoviumunlimited.nl/v1/games/"+a.params.id),i=await e.json();t.results=i.game,n.value=new f({loaderUrl:i.game[0]._loader_js[0],dataUrl:i.game[0]._data_gz[0],frameworkUrl:i.game[0]._framework_js_gz[0],codeUrl:i.game[0]._wasm_gz[0]}),n.value.on("progress",(e=>{_()(".progress-bar").css("width",100*e+"%").text(100*e+"%"),1===e?(_()(".progress").hide(),_()("#game").show()):_()("#game").hide()})),n.value.on("created",(()=>{console.log("Unity Instance: created."),o()}))}catch(e){t.errors.push(e)}}));const o=()=>{console.log("inside userinfo"),n.value.send("mainController","UserInfo",{JWT:"b001",Email:"buil001"}),console.log("after userinfo")},l=()=>{n.value.setFullscreen(!0)};return(e,t)=>((0,i.wg)(),(0,i.iD)("div",U,[(0,i._)("div",I,[(0,i._)("div",j,[E,(0,i._)("div",C,[n.value?((0,i.wg)(),(0,i.j4)((0,r.SU)(p),{key:0,unity:n.value},null,8,["unity"])):(0,i.kq)("",!0),(0,i._)("a",{onClick:l,class:"btn float-right"},L)])])])]))}};const S=x;var k=S}}]);
//# sourceMappingURL=864.e0c791e0.js.map